{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useContext, useState } from \"react\";\nimport Context from \"../context/UserContext\";\nimport LoginService from \"../services/loginService\";\nexport default function useUser() {\n  _s();\n\n  const {\n    jwt,\n    setjwt,\n    setFavs\n  } = useContext(Context);\n  const [state, setState] = useState({\n    loading: false,\n    error: false\n  });\n  const login = useCallback(_ref => {\n    let {\n      username,\n      password\n    } = _ref;\n    setState({\n      loading: true,\n      error: false\n    });\n    LoginService({\n      username,\n      password\n    }).then(jwt => {\n      //  jwt = 'response'\n      window.sessionStorage.setItem('jwt', jwt);\n      setState({\n        loading: false,\n        error: false\n      });\n      setjwt(jwt);\n    }).catch(err => {\n      window.sessionStorage.removeItem('jwt');\n      setState({\n        loading: false,\n        error: true\n      });\n      console.log(err);\n    });\n  }, [setjwt]);\n  const fav = useCallback(_ref2 => {\n    let {\n      id\n    } = _ref2;\n    favService({\n      id,\n      jwt\n    }).then(favs => setFavs);\n  });\n  const logout = useCallback(() => {\n    window.sessionStorage.removeItem('jwt');\n    setjwt(null);\n  }, [setjwt]);\n  return {\n    isLogged: Boolean(jwt),\n    isLogingLoading: state.loading,\n    isLoadingError: state.error,\n    login,\n    logout\n  };\n}\n\n_s(useUser, \"+CJeOdb22CepdusSS5hImkeUIAg=\");","map":{"version":3,"names":["useCallback","useContext","useState","Context","LoginService","useUser","jwt","setjwt","setFavs","state","setState","loading","error","login","username","password","then","window","sessionStorage","setItem","catch","err","removeItem","console","log","fav","id","favService","favs","logout","isLogged","Boolean","isLogingLoading","isLoadingError"],"sources":["/Users/sebastianacosta/Bootcamp/giffy/src/hooks/useUser.js"],"sourcesContent":["import { useCallback, useContext, useState } from \"react\";\nimport Context from \"../context/UserContext\";\nimport LoginService from \"../services/loginService\";\n\nexport default function useUser(){\n\nconst {jwt, setjwt, setFavs} = useContext(Context)\nconst [state,setState] = useState({loading:false, error: false});\n\nconst login = useCallback(({username,password}) => {\n    setState({loading:true, error:false})\n  LoginService({username, password})\n  .then(jwt => {\n  //  jwt = 'response'\n  window.sessionStorage.setItem('jwt', jwt)\n    setState({loading:false, error :false})\n    setjwt(jwt)\n  })\n  .catch(err =>{\n    window.sessionStorage.removeItem('jwt')\n    setState({loading:false, error:true})\n   console.log(err)\n  })\n},[ setjwt])\n\nconst fav = useCallback( ({id}) =>{\nfavService({id, jwt})\n.then(favs => setFavs)\n})\n\nconst logout = useCallback(()=>{\n    window.sessionStorage.removeItem('jwt')\n    setjwt(null)\n}, [setjwt])\n\n\n\nreturn{\n    isLogged: Boolean(jwt),\n    isLogingLoading: state.loading,\n    isLoadingError: state.error,\n    login,\n    logout\n}\n}"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,UAAtB,EAAkCC,QAAlC,QAAkD,OAAlD;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AAEA,eAAe,SAASC,OAAT,GAAkB;EAAA;;EAEjC,MAAM;IAACC,GAAD;IAAMC,MAAN;IAAcC;EAAd,IAAyBP,UAAU,CAACE,OAAD,CAAzC;EACA,MAAM,CAACM,KAAD,EAAOC,QAAP,IAAmBR,QAAQ,CAAC;IAACS,OAAO,EAAC,KAAT;IAAgBC,KAAK,EAAE;EAAvB,CAAD,CAAjC;EAEA,MAAMC,KAAK,GAAGb,WAAW,CAAC,QAAyB;IAAA,IAAxB;MAACc,QAAD;MAAUC;IAAV,CAAwB;IAC/CL,QAAQ,CAAC;MAACC,OAAO,EAAC,IAAT;MAAeC,KAAK,EAAC;IAArB,CAAD,CAAR;IACFR,YAAY,CAAC;MAACU,QAAD;MAAWC;IAAX,CAAD,CAAZ,CACCC,IADD,CACMV,GAAG,IAAI;MACb;MACAW,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,KAA9B,EAAqCb,GAArC;MACEI,QAAQ,CAAC;QAACC,OAAO,EAAC,KAAT;QAAgBC,KAAK,EAAE;MAAvB,CAAD,CAAR;MACAL,MAAM,CAACD,GAAD,CAAN;IACD,CAND,EAOCc,KAPD,CAOOC,GAAG,IAAG;MACXJ,MAAM,CAACC,cAAP,CAAsBI,UAAtB,CAAiC,KAAjC;MACAZ,QAAQ,CAAC;QAACC,OAAO,EAAC,KAAT;QAAgBC,KAAK,EAAC;MAAtB,CAAD,CAAR;MACDW,OAAO,CAACC,GAAR,CAAYH,GAAZ;IACA,CAXD;EAYD,CAdwB,EAcvB,CAAEd,MAAF,CAduB,CAAzB;EAgBA,MAAMkB,GAAG,GAAGzB,WAAW,CAAE,SAAS;IAAA,IAAR;MAAC0B;IAAD,CAAQ;IAClCC,UAAU,CAAC;MAACD,EAAD;MAAKpB;IAAL,CAAD,CAAV,CACCU,IADD,CACMY,IAAI,IAAIpB,OADd;EAEC,CAHsB,CAAvB;EAKA,MAAMqB,MAAM,GAAG7B,WAAW,CAAC,MAAI;IAC3BiB,MAAM,CAACC,cAAP,CAAsBI,UAAtB,CAAiC,KAAjC;IACAf,MAAM,CAAC,IAAD,CAAN;EACH,CAHyB,EAGvB,CAACA,MAAD,CAHuB,CAA1B;EAOA,OAAM;IACFuB,QAAQ,EAAEC,OAAO,CAACzB,GAAD,CADf;IAEF0B,eAAe,EAAEvB,KAAK,CAACE,OAFrB;IAGFsB,cAAc,EAAExB,KAAK,CAACG,KAHpB;IAIFC,KAJE;IAKFgB;EALE,CAAN;AAOC;;GAxCuBxB,O"},"metadata":{},"sourceType":"module"}