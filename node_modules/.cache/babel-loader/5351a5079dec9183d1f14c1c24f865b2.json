{"ast":null,"code":"import throttle from\"just-throttle\";import{useCallback,useEffect,useRef}from\"react\";import{Helmet}from\"react-helmet\";import ListGifs from\"../components/ListGifs\";import{GifHook}from\"../hooks/GifHook\";import useNearScreen from\"../hooks/isNearscreen\";import SearchForm from\"./SearchForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SearchResults(_ref){var params=_ref.params;var keyword=params.keyword,_params$rating=params.rating,rating=_params$rating===void 0?'g':_params$rating;var _GifHook=GifHook({keyword:keyword,rating:rating}),loading=_GifHook.loading,gifos=_GifHook.gifos,setPage=_GifHook.setPage;// Infinite scroll\nvar externalRef=useRef();var _useNearScreen=useNearScreen({externalRef:loading?null:externalRef,once:false}),show=_useNearScreen.show;//titlte SEO\nvar title=gifos?\"Results of \".concat(keyword):\"\";// useTitle({title})\nvar debounceHandleNextpage=useCallback(throttle(function(){return setPage(function(prevPage){return prevPage+1;});},200),[setPage]);// change debounce to turtle \nuseEffect(function(){//console.log(show)\nif(show)debounceHandleNextpage();},[show,debounceHandleNextpage]);return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(\"h1\",{children:\"Loading from search results\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsxs(\"title\",{children:[\" \",title,\"  | Giffy \"]}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:title})]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",decodeURIComponent(params.keyword),\" \"]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(SearchForm,{initialKeyword:params.keyword,initialRating:rating})}),/*#__PURE__*/_jsx(ListGifs,{gifs:gifos}),/*#__PURE__*/_jsx(\"div\",{id:\"visor\",ref:externalRef})]})});}","map":{"version":3,"names":["throttle","useCallback","useEffect","useRef","Helmet","ListGifs","GifHook","useNearScreen","SearchForm","SearchResults","params","keyword","rating","loading","gifos","setPage","externalRef","once","show","title","debounceHandleNextpage","prevPage","decodeURIComponent"],"sources":["/Users/sebastianacosta/Bootcamp/giffy/src/pages/SearchResults.js"],"sourcesContent":["\n\nimport throttle from \"just-throttle\";\nimport { useCallback, useEffect, useRef } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport ListGifs from \"../components/ListGifs\";\n\nimport {GifHook} from \"../hooks/GifHook\";\nimport useNearScreen from \"../hooks/isNearscreen\";\nimport SearchForm from \"./SearchForm\";\n\n\n\nexport default function SearchResults({params}){\n\n\n    const {keyword, rating = 'g'}= params\n\n  \n\n    const {loading, gifos, setPage} = GifHook({keyword, rating})\n\n    // Infinite scroll\n\n    const externalRef = useRef()\n\n    const {show } = useNearScreen({externalRef : loading? null: externalRef,\n    once:false})\n\n    //titlte SEO\nconst title = gifos? `Results of ${keyword}`: \"\"\n    // useTitle({title})\n\n   \n    const debounceHandleNextpage = useCallback( throttle(\n        () =>setPage(prevPage => prevPage+ 1)\n        , 200\n    ), [setPage])\n\n    \n    // change debounce to turtle \n\n    useEffect(()=>{\n\n    //console.log(show)\n        if(show) debounceHandleNextpage();\n    } , [show, debounceHandleNextpage])\n\n \n\n    return (\n        <div>\n          \n            {loading?\n            <h1>Loading from search results</h1>\n        :\n       <>\n         <Helmet>\n                <title> {title}  | Giffy </title>\n                <meta name=\"description\" content={title} />\n            </Helmet>\n       <h1> {decodeURIComponent(params.keyword)} </h1>\n       <div>\n       <SearchForm initialKeyword={params.keyword} initialRating={rating}/>\n       </div>\n       <ListGifs gifs={gifos} />\n       <div id=\"visor\" ref={externalRef}></div>\n       </>   \n         }\n\n             \n      \n        </div>\n    );\n}"],"mappings":"AAEA,MAAOA,SAAP,KAAqB,eAArB,CACA,OAASC,WAAT,CAAsBC,SAAtB,CAAiCC,MAAjC,KAA+C,OAA/C,CACA,OAASC,MAAT,KAAuB,cAAvB,CACA,MAAOC,SAAP,KAAqB,wBAArB,CAEA,OAAQC,OAAR,KAAsB,kBAAtB,CACA,MAAOC,cAAP,KAA0B,uBAA1B,CACA,MAAOC,WAAP,KAAuB,cAAvB,C,6IAIA,cAAe,SAASC,cAAT,MAAgC,IAARC,OAAQ,MAARA,MAAQ,CAG3C,GAAOC,QAAP,CAA+BD,MAA/B,CAAOC,OAAP,gBAA+BD,MAA/B,CAAgBE,MAAhB,CAAgBA,MAAhB,yBAAyB,GAAzB,gBAIA,aAAkCN,OAAO,CAAC,CAACK,OAAO,CAAPA,OAAD,CAAUC,MAAM,CAANA,MAAV,CAAD,CAAzC,CAAOC,OAAP,UAAOA,OAAP,CAAgBC,KAAhB,UAAgBA,KAAhB,CAAuBC,OAAvB,UAAuBA,OAAvB,CAEA;AAEA,GAAMC,YAAW,CAAGb,MAAM,EAA1B,CAEA,mBAAgBI,aAAa,CAAC,CAACS,WAAW,CAAGH,OAAO,CAAE,IAAF,CAAQG,WAA9B,CAC9BC,IAAI,CAAC,KADyB,CAAD,CAA7B,CAAOC,IAAP,gBAAOA,IAAP,CAGA;AACJ,GAAMC,MAAK,CAAGL,KAAK,sBAAgBH,OAAhB,EAA2B,EAA9C,CACI;AAGA,GAAMS,uBAAsB,CAAGnB,WAAW,CAAED,QAAQ,CAChD,iBAAKe,QAAO,CAAC,SAAAM,QAAQ,QAAIA,SAAQ,CAAE,CAAd,EAAT,CAAZ,EADgD,CAE9C,GAF8C,CAAV,CAGvC,CAACN,OAAD,CAHuC,CAA1C,CAMA;AAEAb,SAAS,CAAC,UAAI,CAEd;AACI,GAAGgB,IAAH,CAASE,sBAAsB,GAClC,CAJQ,CAIL,CAACF,IAAD,CAAOE,sBAAP,CAJK,CAAT,CAQA,mBACI,qBAEKP,OAAO,cACR,mDADQ,cAGb,wCACE,MAAC,MAAD,yBACO,6BAASM,KAAT,gBADP,cAEO,aAAM,IAAI,CAAC,aAAX,CAAyB,OAAO,CAAEA,KAAlC,EAFP,GADF,cAKA,0BAAMG,kBAAkB,CAACZ,MAAM,CAACC,OAAR,CAAxB,OALA,cAMA,kCACA,KAAC,UAAD,EAAY,cAAc,CAAED,MAAM,CAACC,OAAnC,CAA4C,aAAa,CAAEC,MAA3D,EADA,EANA,cASA,KAAC,QAAD,EAAU,IAAI,CAAEE,KAAhB,EATA,cAUA,YAAK,EAAE,CAAC,OAAR,CAAgB,GAAG,CAAEE,WAArB,EAVA,GALC,EADJ,CAwBH"},"metadata":{},"sourceType":"module"}