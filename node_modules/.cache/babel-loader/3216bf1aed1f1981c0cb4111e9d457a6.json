{"ast":null,"code":"import throttle from\"just-throttle\";import{useCallback,useEffect,useRef}from\"react\";import{Helmet}from\"react-helmet\";import ListGifs from\"../components/ListGifs\";import{GifHook}from\"../hooks/GifHook\";import useNearScreen from\"../hooks/isNearscreen\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SearchResults(_ref){var params=_ref.params;var keyword=params.keyword;var _GifHook=GifHook({keyword:keyword}),loading=_GifHook.loading,gifos=_GifHook.gifos,setPage=_GifHook.setPage;// Infinite scroll\nvar externalRef=useRef();var _useNearScreen=useNearScreen({externalRef:loading?null:externalRef,once:false}),show=_useNearScreen.show;var title=gifos?\"Results of \".concat(keyword):\"\";// useTitle({title})\n// eslint-disable-next-line react-hooks/exhaustive-deps\nvar debounceHandleNextpage=useCallback(throttle(function(){return setPage(function(prevPage){return prevPage+1;});},200),[setPage]);// change debounce to turtle \nuseEffect(function(){//console.log(show)\nif(show)debounceHandleNextpage();},[show,debounceHandleNextpage]);return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(\"h1\",{children:\"Loading from search results\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsxs(\"title\",{children:[\" \",title,\"  | Giffy \"]}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:title})]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",params.keyword,\" \"]}),/*#__PURE__*/_jsx(ListGifs,{gifs:gifos}),/*#__PURE__*/_jsx(\"div\",{id:\"visor\",ref:externalRef})]})});}","map":{"version":3,"names":["throttle","useCallback","useEffect","useRef","Helmet","ListGifs","GifHook","useNearScreen","SearchResults","params","keyword","loading","gifos","setPage","externalRef","once","show","title","debounceHandleNextpage","prevPage"],"sources":["/Users/sebastianacosta/Bootcamp/giffy/src/pages/SearchResults.js"],"sourcesContent":["\n\nimport throttle from \"just-throttle\";\nimport { useCallback, useEffect, useRef } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport ListGifs from \"../components/ListGifs\";\n\nimport {GifHook} from \"../hooks/GifHook\";\nimport useNearScreen from \"../hooks/isNearscreen\";\n\n\n\nexport default function SearchResults({params}){\n\n\n    const {keyword}= params\n\n  \n\n    const {loading, gifos, setPage} = GifHook({keyword})\n\n    // Infinite scroll\n\n    const externalRef = useRef()\n\n    \n   \n\n    const {show } = useNearScreen({externalRef : loading? null: externalRef,\n    once:false})\n\nconst title = gifos? `Results of ${keyword}`: \"\"\n    // useTitle({title})\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const debounceHandleNextpage = useCallback( throttle(\n        () =>setPage(prevPage => prevPage+ 1)\n        , 200\n    ), [setPage])\n\n    \n\n\n\n    // change debounce to turtle \n\n    useEffect(()=>{\n\n    //console.log(show)\n        if(show) debounceHandleNextpage();\n    } , [show, debounceHandleNextpage])\n\n \n\n\n\n\n    return (\n        <div>\n          \n            {loading?\n            <h1>Loading from search results</h1>\n        :\n       <>\n         <Helmet>\n                <title> {title}  | Giffy </title>\n                <meta name=\"description\" content={title} />\n            </Helmet>\n       <h1> {params.keyword} </h1>\n       <ListGifs gifs={gifos} />\n       <div id=\"visor\" ref={externalRef}></div>\n       </>   \n         }\n\n             \n      \n        </div>\n    );\n}"],"mappings":"AAEA,MAAOA,SAAP,KAAqB,eAArB,CACA,OAASC,WAAT,CAAsBC,SAAtB,CAAiCC,MAAjC,KAA+C,OAA/C,CACA,OAASC,MAAT,KAAuB,cAAvB,CACA,MAAOC,SAAP,KAAqB,wBAArB,CAEA,OAAQC,OAAR,KAAsB,kBAAtB,CACA,MAAOC,cAAP,KAA0B,uBAA1B,C,6IAIA,cAAe,SAASC,cAAT,MAAgC,IAARC,OAAQ,MAARA,MAAQ,CAG3C,GAAOC,QAAP,CAAiBD,MAAjB,CAAOC,OAAP,CAIA,aAAkCJ,OAAO,CAAC,CAACI,OAAO,CAAPA,OAAD,CAAD,CAAzC,CAAOC,OAAP,UAAOA,OAAP,CAAgBC,KAAhB,UAAgBA,KAAhB,CAAuBC,OAAvB,UAAuBA,OAAvB,CAEA;AAEA,GAAMC,YAAW,CAAGX,MAAM,EAA1B,CAKA,mBAAgBI,aAAa,CAAC,CAACO,WAAW,CAAGH,OAAO,CAAE,IAAF,CAAQG,WAA9B,CAC9BC,IAAI,CAAC,KADyB,CAAD,CAA7B,CAAOC,IAAP,gBAAOA,IAAP,CAGJ,GAAMC,MAAK,CAAGL,KAAK,sBAAgBF,OAAhB,EAA2B,EAA9C,CACI;AAEA;AACA,GAAMQ,uBAAsB,CAAGjB,WAAW,CAAED,QAAQ,CAChD,iBAAKa,QAAO,CAAC,SAAAM,QAAQ,QAAIA,SAAQ,CAAE,CAAd,EAAT,CAAZ,EADgD,CAE9C,GAF8C,CAAV,CAGvC,CAACN,OAAD,CAHuC,CAA1C,CASA;AAEAX,SAAS,CAAC,UAAI,CAEd;AACI,GAAGc,IAAH,CAASE,sBAAsB,GAClC,CAJQ,CAIL,CAACF,IAAD,CAAOE,sBAAP,CAJK,CAAT,CAWA,mBACI,qBAEKP,OAAO,cACR,mDADQ,cAGb,wCACE,MAAC,MAAD,yBACO,6BAASM,KAAT,gBADP,cAEO,aAAM,IAAI,CAAC,aAAX,CAAyB,OAAO,CAAEA,KAAlC,EAFP,GADF,cAKA,0BAAMR,MAAM,CAACC,OAAb,OALA,cAMA,KAAC,QAAD,EAAU,IAAI,CAAEE,KAAhB,EANA,cAOA,YAAK,EAAE,CAAC,OAAR,CAAgB,GAAG,CAAEE,WAArB,EAPA,GALC,EADJ,CAqBH"},"metadata":{},"sourceType":"module"}