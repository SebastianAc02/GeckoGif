{"ast":null,"code":"import _slicedToArray from\"/Users/sebastianacosta/Bootcamp/giffy/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from\"react\";import GifsContextProvider from\"../context/GifContext\";import getGifs from\"../services/getGifs\";export function GifHook(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{keyword:null},keyword=_ref.keyword,rating=_ref.rating;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useContext=useContext(GifsContextProvider),gifos=_useContext.gifos,setGifs=_useContext.setGifs;// const [gifos, setGifs] = useState([])\nvar keywordTouse=keyword?keyword:localStorage.getItem('lastkeyword');// Paginacion : \nvar INITIAL_PAGE=0;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadingpage=_useState4[0],setloadingpage=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];useEffect(function(){getGifs({keywordTouse:keywordTouse,page:page,rating:rating}).then(function(gifs){setLoading(true);setGifs(gifs);setLoading(false);localStorage.setItem('lastkeyword',keyword);});},[keyword,keywordTouse,setGifs,loadingpage,page,rating]);useEffect(function(){if(page===INITIAL_PAGE){return;}else{setloadingpage(true);getGifs({keyword:keywordTouse,page:page,rating:rating}).then(function(nextGifs){setGifs(function(gifos){return gifos.concat(nextGifs);});setloadingpage(false);});}},[page,keywordTouse,setGifs,setloadingpage,rating]);return{loading:loading,gifos:gifos,setPage:setPage};}","map":{"version":3,"names":["useContext","useEffect","useState","GifsContextProvider","getGifs","GifHook","keyword","rating","loading","setLoading","gifos","setGifs","keywordTouse","localStorage","getItem","INITIAL_PAGE","loadingpage","setloadingpage","page","setPage","then","gifs","setItem","nextGifs","concat"],"sources":["/Users/sebastianacosta/Bootcamp/giffy/src/hooks/GifHook.js"],"sourcesContent":["\n\n\nimport { useContext, useEffect, useState } from \"react\"\nimport  GifsContextProvider  from \"../context/GifContext\"\nimport getGifs from \"../services/getGifs\"\n\nexport  function GifHook({keyword, rating} = {keyword: null} ){\n\n\n    const[loading, setLoading] = useState(false)\n    \n    const {gifos, setGifs} = useContext(GifsContextProvider)\n\n    // const [gifos, setGifs] = useState([])\n \n    const keywordTouse =  keyword? keyword:  localStorage.getItem('lastkeyword')\n\n\n\n// Paginacion : \n    const INITIAL_PAGE = 0\n\n\n    const [loadingpage, setloadingpage] = useState(false)\n\n    const [page, setPage ] = useState(0)\n    \n    useEffect(()=>{\n\n       getGifs({ keywordTouse, page, rating})\n        .then((gifs) =>   {\n            setLoading(true)\n \n            setGifs(gifs)\n\n            setLoading(false)\n             localStorage.setItem('lastkeyword', keyword)\n        })\n\n    },[keyword, keywordTouse, setGifs, loadingpage, page, rating])\n\n    \n\n      \n        \nuseEffect(()=>{\n\n    if(page === INITIAL_PAGE)\n    {\n        return\n    }\n    else{\n\n       \n    setloadingpage(true)\n\n   \n    getGifs({keyword: keywordTouse, page: page, rating})\n    .then((nextGifs)=> {\n        setGifs(gifos => gifos.concat(nextGifs))\n        setloadingpage(false)\n    })\n}\n    \n}, [page, keywordTouse, setGifs, setloadingpage, rating] )\n\n\n        \n  \n\n       \n        \n        return {loading, gifos, setPage};\n\n\n\n    \n\n}"],"mappings":"2HAGA,OAASA,UAAT,CAAqBC,SAArB,CAAgCC,QAAhC,KAAgD,OAAhD,CACA,MAAQC,oBAAR,KAAkC,uBAAlC,CACA,MAAOC,QAAP,KAAoB,qBAApB,CAEA,MAAQ,SAASC,QAAT,EAAsD,oEAAjB,CAACC,OAAO,CAAE,IAAV,CAAiB,CAApCA,OAAoC,MAApCA,OAAoC,CAA3BC,MAA2B,MAA3BA,MAA2B,CAG1D,cAA6BL,QAAQ,CAAC,KAAD,CAArC,wCAAMM,OAAN,eAAeC,UAAf,eAEA,gBAAyBT,UAAU,CAACG,mBAAD,CAAnC,CAAOO,KAAP,aAAOA,KAAP,CAAcC,OAAd,aAAcA,OAAd,CAEA;AAEA,GAAMC,aAAY,CAAIN,OAAO,CAAEA,OAAF,CAAYO,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAzC,CAIJ;AACI,GAAMC,aAAY,CAAG,CAArB,CAGA,eAAsCb,QAAQ,CAAC,KAAD,CAA9C,yCAAOc,WAAP,eAAoBC,cAApB,eAEA,eAAyBf,QAAQ,CAAC,CAAD,CAAjC,yCAAOgB,IAAP,eAAaC,OAAb,eAEAlB,SAAS,CAAC,UAAI,CAEXG,OAAO,CAAC,CAAEQ,YAAY,CAAZA,YAAF,CAAgBM,IAAI,CAAJA,IAAhB,CAAsBX,MAAM,CAANA,MAAtB,CAAD,CAAP,CACEa,IADF,CACO,SAACC,IAAD,CAAY,CACdZ,UAAU,CAAC,IAAD,CAAV,CAEAE,OAAO,CAACU,IAAD,CAAP,CAEAZ,UAAU,CAAC,KAAD,CAAV,CACCI,YAAY,CAACS,OAAb,CAAqB,aAArB,CAAoChB,OAApC,EACJ,CARF,EAUF,CAZQ,CAYP,CAACA,OAAD,CAAUM,YAAV,CAAwBD,OAAxB,CAAiCK,WAAjC,CAA8CE,IAA9C,CAAoDX,MAApD,CAZO,CAAT,CAkBJN,SAAS,CAAC,UAAI,CAEV,GAAGiB,IAAI,GAAKH,YAAZ,CACA,CACI,OACH,CAHD,IAII,CAGJE,cAAc,CAAC,IAAD,CAAd,CAGAb,OAAO,CAAC,CAACE,OAAO,CAAEM,YAAV,CAAwBM,IAAI,CAAEA,IAA9B,CAAoCX,MAAM,CAANA,MAApC,CAAD,CAAP,CACCa,IADD,CACM,SAACG,QAAD,CAAa,CACfZ,OAAO,CAAC,SAAAD,KAAK,QAAIA,MAAK,CAACc,MAAN,CAAaD,QAAb,CAAJ,EAAN,CAAP,CACAN,cAAc,CAAC,KAAD,CAAd,CACH,CAJD,EAKH,CAEA,CAnBQ,CAmBN,CAACC,IAAD,CAAON,YAAP,CAAqBD,OAArB,CAA8BM,cAA9B,CAA8CV,MAA9C,CAnBM,CAAT,CA2BQ,MAAO,CAACC,OAAO,CAAPA,OAAD,CAAUE,KAAK,CAALA,KAAV,CAAiBS,OAAO,CAAPA,OAAjB,CAAP,CAMP"},"metadata":{},"sourceType":"module"}